{% extends "base.html" %}

{% block title %}LOG HABIT - AI HABIT COACH{% endblock %}

{% block content %}
<div class="header">
    <h1>üìù LOG HABIT</h1>
    <p>{{ profile.habit_description|upper }}</p>
</div>

<div class="card">
    <h3>üìä YOUR HEALTH TODAY</h3>
    
    {% if health.data_source == 'apple_health' %}
    <div class="alert alert-info">
        ‚úÖ DATA FROM APPLE HEALTH
    </div>
    {% else %}
    <div class="alert alert-info">
        üîÆ SIMULATED HEALTH DATA (APPLE HEALTH NOT CONNECTED)
    </div>
    {% endif %}
    
    <div class="health-indicator">
        <span class="health-label">üí§ SLEEP QUALITY</span>
        <span class="health-value">{{ "%.1f"|format(health.sleep_quality) }}/10</span>
    </div>
    
    <div class="health-indicator">
        <span class="health-label">‚ö° ENERGY LEVEL</span>
        <span class="health-value">{{ "%.1f"|format(health.energy_level) }}/10</span>
    </div>
    
    <div class="health-indicator">
        <span class="health-label">üò∞ STRESS LEVEL</span>
        <span class="health-value">{{ "%.1f"|format(health.stress_level) }}/10</span>
    </div>
</div>

<form method="POST" action="/log">
    <div class="card">
        <h3>DID YOU COMPLETE YOUR HABIT TODAY?</h3>
        
        <button type="submit" name="completed" value="true" class="btn btn-success" 
                onclick="document.getElementById('details').style.display='block';">
            ‚úÖ YES, I DID IT!
        </button>
        
        <button type="submit" name="completed" value="false" class="btn btn-danger"
                onclick="return confirm('MARK AS SKIPPED?');">
            ‚ùå NO, I SKIPPED IT
        </button>
    </div>
    
    <div class="card" id="details" style="display: none;">
        <h3>HOW WAS IT?</h3>
        
        <div style="margin: 20px 0;">
            <label style="display: block; margin-bottom: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">
                üòÖ DIFFICULTY: <span id="difficulty-value">5</span>/10
            </label>
            <input type="range" name="difficulty" min="1" max="10" value="5" 
                   oninput="document.getElementById('difficulty-value').textContent = this.value">
        </div>
        
        <div style="margin: 20px 0;">
            <label style="display: block; margin-bottom: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">
                üí™ MOTIVATION: <span id="motivation-value">5</span>/10
            </label>
            <input type="range" name="motivation" min="1" max="10" value="5"
                   oninput="document.getElementById('motivation-value').textContent = this.value">
        </div>
        
        <div style="margin: 20px 0;">
            <label style="display: block; margin-bottom: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">
                ‚è±Ô∏è DURATION (MINUTES)
            </label>
            <input type="number" name="duration" value="{{ profile.habit_target_duration }}" min="0">
        </div>
        
        <div style="margin: 20px 0;">
            <label style="display: block; margin-bottom: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">
                üìî NOTES (OPTIONAL)
            </label>
            <textarea name="notes" rows="3" placeholder="ANY OBSERVATIONS?"></textarea>
        </div>
    </div>
</form>

<script>
// Show details section when clicking yes
document.querySelector('.btn-success').addEventListener('click', function(e) {
    e.preventDefault();
    document.getElementById('details').style.display = 'block';
    this.textContent = '‚úÖ SAVE & SUBMIT';
    this.onclick = null;
});
</script>
{% endblock %}

