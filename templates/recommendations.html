{% extends "base.html" %}

{% block title %}AI Recommendations - AI Habit Coach{% endblock %}

{% block content %}
<div class="header">
    <h1>ğŸ¤– AI Recommendations</h1>
    <p>Personalized Insights</p>
</div>

{% if not has_models %}
<div class="card">
    <div style="text-align: center; padding: 20px;">
        <div style="font-size: 48px; margin-bottom: 10px;">âš ï¸</div>
        <h3 style="color: #ff3b30;">Models Not Trained Yet</h3>
        <p style="color: #8e8e93; margin: 15px 0;">
            Train the ML models to get AI recommendations.
        </p>
        <p style="color: #8e8e93;">
            Run: <code style="background: #2c2c2e; padding: 4px 8px; border: none; border-radius: 6px; font-size: 14px;">python3 main.py train {{ profile.name.lower().replace(' ', '_') }}</code>
        </p>
    </div>
</div>
{% else %}

<div class="card">
    <h3>â° Best Times for Today</h3>
    <p style="color: #8e8e93; margin-bottom: 20px;">Based on your historical patterns</p>
    
    {% for hour, prob in optimal_times %}
    <div class="health-indicator">
        <span class="health-label">{{ "%02d"|format(hour) }}:00</span>
        <span class="health-value">{{ (prob * 100)|int }}% Success</span>
    </div>
    {% endfor %}
</div>

<div class="card">
    <h3>ğŸ¯ Right Now</h3>
    
    <div style="text-align: center; padding: 20px;">
        <div style="font-size: 64px; font-weight: bold; color: #007aff; margin-bottom: 10px;">
            {{ (current_prob * 100)|int }}%
        </div>
        <p style="font-size: 17px; color: #8e8e93;">Predicted Success Probability</p>
    </div>
    
    {% if current_prob > 0.7 %}
    <div class="alert alert-success">
        ğŸ’š Great time to do your habit!
    </div>
    {% elif current_prob > 0.5 %}
    <div class="alert alert-info">
        ğŸ’› Decent time, you can do this!
    </div>
    {% else %}
    <div class="alert alert-info">
        ğŸ§¡ Challenging time - maybe wait for optimal window?
    </div>
    {% endif %}
</div>

<div class="card">
    <h3>ğŸ’¡ Insights</h3>
    
    {% if stats.days_since_last > 2 %}
    <div class="alert alert-warning">
        <strong>âš ï¸ Warning:</strong> {{ stats.days_since_last }} days since last completion.<br>
        Getting back on track is crucial!
    </div>
    {% endif %}
    
    {% if stats.current_streak >= 7 %}
    <div class="alert alert-success">
        <strong>ğŸ”¥ Amazing!</strong> You're on a {{ stats.current_streak }}-day streak!<br>
        Keep the momentum going!
    </div>
    {% endif %}
    
    {% if stats.current_streak >= 21 %}
    <div class="alert alert-info">
        <strong>ğŸ† Milestone!</strong> 21+ days streak!<br>
        This habit is becoming automatic!
    </div>
    {% endif %}
</div>

{% endif %}

<div style="padding: 0 16px;">
    <a href="/" class="btn btn-primary">â† Back to Dashboard</a>
</div>
{% endblock %}

