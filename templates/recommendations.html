{% extends "base.html" %}

{% block title %}AI RECOMMENDATIONS - AI HABIT COACH{% endblock %}

{% block content %}
<div class="header">
    <h1>ü§ñ AI RECOMMENDATIONS</h1>
    <p>PERSONALIZED INSIGHTS</p>
</div>

{% if not has_models %}
<div class="card">
    <div style="text-align: center; padding: 20px;">
        <div style="font-size: 48px; margin-bottom: 10px;">‚ö†Ô∏è</div>
        <h3 style="color: #ff0000; text-transform: uppercase; letter-spacing: 1px;">MODELS NOT TRAINED YET</h3>
        <p style="color: #aaa; margin: 15px 0;">
            TRAIN THE ML MODELS TO GET AI RECOMMENDATIONS.
        </p>
        <p style="color: #aaa;">
            RUN: <code style="background: rgba(10, 10, 10, 0.95); padding: 2px 6px; border: 1px solid #333;">python3 main.py train {{ profile.name.lower().replace(' ', '_') }}</code>
        </p>
    </div>
</div>
{% else %}

<div class="card">
    <h3>‚è∞ BEST TIMES FOR TODAY</h3>
    <p style="color: #aaa; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 1px;">BASED ON YOUR HISTORICAL PATTERNS</p>
    
    {% for hour, prob in optimal_times %}
    <div class="health-indicator">
        <span class="health-label">{{ "%02d"|format(hour) }}:00</span>
        <span class="health-value">{{ (prob * 100)|int }}% SUCCESS</span>
    </div>
    {% endfor %}
</div>

<div class="card">
    <h3>üéØ RIGHT NOW</h3>
    
    <div style="text-align: center; padding: 20px;">
        <div style="font-size: 64px; font-weight: bold; color: #8b9eff; margin-bottom: 10px;">
            {{ (current_prob * 100)|int }}%
        </div>
        <p style="font-size: 18px; color: #aaa; text-transform: uppercase; letter-spacing: 1px;">PREDICTED SUCCESS PROBABILITY</p>
    </div>
    
    {% if current_prob > 0.7 %}
    <div class="alert alert-success">
        üíö GREAT TIME TO DO YOUR HABIT!
    </div>
    {% elif current_prob > 0.5 %}
    <div class="alert alert-info">
        üíõ DECENT TIME, YOU CAN DO THIS!
    </div>
    {% else %}
    <div class="alert alert-info">
        üß° CHALLENGING TIME - MAYBE WAIT FOR OPTIMAL WINDOW?
    </div>
    {% endif %}
</div>

<div class="card">
    <h3>üí° INSIGHTS</h3>
    
    {% if stats.days_since_last > 2 %}
    <div style="background: rgba(255, 204, 102, 0.1); padding: 15px; margin-bottom: 10px; border: 1px solid #ffcc66; color: #ffcc66; position: relative;">
        <div style="position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, #ffcc66, transparent);"></div>
        <strong>‚ö†Ô∏è WARNING:</strong> {{ stats.days_since_last }} DAYS SINCE LAST COMPLETION.<br>
        GETTING BACK ON TRACK IS CRUCIAL!
    </div>
    {% endif %}
    
    {% if stats.current_streak >= 7 %}
    <div style="background: rgba(0, 255, 0, 0.1); padding: 15px; margin-bottom: 10px; border: 1px solid #00ff00; color: #00ff00; position: relative;">
        <div style="position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, #00ff00, transparent);"></div>
        <strong>üî• AMAZING!</strong> YOU'RE ON A {{ stats.current_streak }}-DAY STREAK!<br>
        KEEP THE MOMENTUM GOING!
    </div>
    {% endif %}
    
    {% if stats.current_streak >= 21 %}
    <div style="background: rgba(139, 158, 255, 0.1); padding: 15px; border: 1px solid #8b9eff; color: #8b9eff; position: relative;">
        <div style="position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, #8b9eff, transparent);"></div>
        <strong>üèÜ MILESTONE!</strong> 21+ DAYS STREAK!<br>
        THIS HABIT IS BECOMING AUTOMATIC!
    </div>
    {% endif %}
</div>

{% endif %}

<a href="/" class="btn btn-primary">‚Üê BACK TO DASHBOARD</a>
{% endblock %}

